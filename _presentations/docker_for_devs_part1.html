---
layout: presentation
pres_title: Docker For Developers - Part 1
---

class: center, middle

# THIS PRESENTATION IS A WORK IN PROGRESS
# Docker for Developers
## Part 1

---

# Agenda
- Key Concepts
- What is Docker?
- What is a Container?
- Containers != VMs
- Containers ∪ VMs
- Running a Container
- Containers Alongside Your Code
- Building a Container
- Your Code in Containers

---

# Key Concepts

What you should probably know before this talk
- bash
    - minimally, enough to run commands and navigate the filesystem
- What a virtual machine is
- Some basic networking
- Some (very) basic network programming

What I hope this talk teaches you
- What Docker is
- What a container is
- How containers differ from VMs
    - conceptually, don't expect a libcontainer deep dive
- How to run a container
- How to use containers to help you write your code
- How to put your code in a container
- How to run your containerized code

???

If they have an interest in this talk, they probably know
enough to get by.

More knowledge of bash is handy for more complicated flags/args/etc,
but traversing the file system is pretty important for understanding
examples, when it comes to building images

---

# What is Docker?

> Docker is the world’s leading software container platform. Developers use Docker to eliminate “works on my machine” problems when collaborating on code with co-workers. Operators use Docker to run and manage apps side-by-side in isolated containers to get better compute density. Enterprises use Docker to build agile software delivery pipelines to ship new features faster, more securely and with confidence for both Linux, Windows Server, and Linux-on-mainframe apps. 

.footnote[https://www.docker.com/what-docker]

???

Straight off the website

Kind of sales-pitchy, but gets the point across

---

# What is a Container?

> Containers are a way to package software in a format that can run isolated on a shared operating system. Unlike VMs, containers do not bundle a full operating system - only libraries and settings required to make the software work are needed. This makes for efficient, lightweight, self-contained systems and guarantees that software will always run the same, regardless of where it’s deployed.

.footnote[https://www.docker.com/what-docker]

???

Straight off the website again

- Not VMs
- isolated (somewhat) - more info coming up next
- small, fast, effecient
- **repeatability**
- Lend themselves very well to automated orchestration

---

# Containers != VMs

To blatantly steal a great metaphor (watch the talk linked below):

VMs package an **entire system**
- Kernel
- Drivers
- Libraries
- Software
- etc

VMs are like houses.
- Houses are freestanding buildings 
- Houses have their own plumbing, electrical, etc

.footnote[[Mike Coleman, "Docker?!? But I'm a SYSADMIN!" - Dockercon 2017](https://www.youtube.com/watch?v=M7ZBF-JJWVU)]

---

# Containers != VMs, cont'd

Containers package a **service** 
- Libraries
- Application

Containers are like apartments
- There are many apartments in a single building
- Apartments share access to many key components, eg: plumbling, electrical

---

# Containers != VMs, cont'd

With this in mind, VMs and containers are typically used in different situations,
with different expectations.

- VMs are commonly used to package complex, potentially stateful, applications.
- VMs are more "permanent" after being created.
- VMs more frequently run multiple services per VM
<hr />
- Containers are commonly used to package simple, usually stateless, applications.
- Containers are ephemeral, appearing and disappearing as required
- Containers often run a single service (if not single process) per container

---

# Containers ∪ VMs

Containers and Virtual Machines are different.

Containers and VMs are both appropriate in different situations.

You should probably know how to use both containers and virtual machines.

You should also know when to use containers and/or virtual machines.

(hint: the talk below helps know when to use what, watch it)

.footnote[[Mike Coleman, "Docker?!? But I'm a SYSADMIN!" - Dockercon 2017](https://www.youtube.com/watch?v=M7ZBF-JJWVU)]

???

The container-folk aren't coming for your VMs with torches and pitchforks
But this isn't a talk about VMs, so lets get on with it

---

# Demo Preparation

We're about to do some demos.

- Have docker installed? 
    - Cool - you can do them locally if you want

- Don't have docker installed? (or just don't want to do them locally?)
    - Cool you can use [play-with-docker.com](http://play-with-docker.com)

If you're using play-with-docker, go ahead and click "+ Add New Instance" on the left.

Can't see "+ Add New Instance"? The website gets a little weird with wrapping sometimes, try and make it fullscreen.

???

Give people a minute to get setup

Encourage people to help those next to them having trouble

---

# Running a Container

So, now that we know (more or less) what containers are, and we've got ourselves 
setup with play-with-docker (or our local docker environments)...

Let's try running one!

This will run an Ubuntu container, and drop you to a bash prompt
```bash
$ docker run -t -i ubuntu bash
```

If bash isn't your thing...
```bash
$ docker run -ti python
```

???

- Running an ubuntu||python image
- Does that say root in the prompt?
    - It does.
- Can potentially do something drastic, like delete bin
    - Demonstrate that **this isn't the host**
- Can demonstrate re-running, to show how fast it is when
you don't have to download the image. Serious difference from VMs.

---

# Running a Container, cont'd

 Command Breakdown

- .remark-inline-code[docker]: The docker CLI utility
- run: The subparser for running containers
- -t: "tty", allocate a pseudo-tty
- -i: "interactive", capture stdin
- ubuntu||python: the image to use
- bash: The command to call within the container
    - Some images have implicit "entrypoints", like Python
    does with the REPL

???

- Interactive containers are not necessarily the norm
    - we're going to run a service next

---

# Intermezzo
## What did I just download?!

You just downloaded an Ubuntu (or python) docker image!

- Docker images are "layers" which make up some container
    - more on layers later
- They can be pushed (or pulled) from the [DockerHub](https://hub.docker.com)
- The DockerHub is a little like a package manager
- Some packages, like Ubuntu or Python are "official" packages
    - Maintained by organization or Docker
- **Always** know what images you're running, especially if from an "unofficial"
source
    - Docker supports various security metrics for this
        - They are outside of the scope of this talk
    - Don't run programs you download off the internet
        - _sarcasm_ (kind of)

???

Don't get side tracked on layers here - they get gone over in "Building
an Image" later.

The security note here is a valid one, but definitely outside of the
scope of this talk, be sure to re-iterate to examine images occasionally
(especially unofficial images, and especially if they are going to be in
contact with sensitive data)

---

# Running a Container, cont'd

```bash
$ docker run -t busybox ping www.google.com
```

---

# Intermezzo
## What's busybox?

TODO: Explain busybox, small images

---

# Running a Container, cont'd

```bash
$ docker run -d busybox ping www.google.com
```

```bash
$ docker logs $identifier
```

```bash
$ docker logs -f $identifier
```

---

# Running a Container, cont'd

```bash
$ docker ps
```

```bash
$ docker ps -a
```

```bash
$ docker ps -aq
```

```bash
$ docker stop $identifier
```

```bash
$ docker rm $identifier
```

```bash
$ docker rm $(docker ps -aq)
```

---
# Running a Container, cont'd

```bash
$ docker run -d -p 80:80 --name webserver nginx
```

```bash
$ curl localhost:80
```

```bash
$ docker stop webserver
```

```bash
$ docker rm webserver
```

---

# Containers Alongside Your Code

TODO: Explain problem domain, ex: "I need a redis server"

---

# Containers Alongside Your Code, cont'd

TODO: Show demo code

---

# Containers Alongside Your Code, cont'd

TODO: Run Demo

---

# Building a Container

TODO: Explain images, layers

---

# Building a Container, cont'd

TODO: Explain Dockerfiles

---

# Building a Container, cont'd

TODO: Basic Dockerfile

---

# Your Code in a Container

TODO: Build basic Dockerfile
TODO: Run basic Dockerfile

---

class: middle

.center[**Thank you**]

.center[Questions?]

.center[Brian Balsamo]
.center[brian@brianbalsamo.com]
